<template>
    <!-- <template for:each={records.data} for:item="record">
        <lightning-layout key={record.Id}>
            <lightning-layout-item>
                <a
                    href="#"
                    key={record.Id}
                    data-record-id={record.Id}
                    onclick={handleSelect}
                >
                {record.Name}
                </a>
            </lightning-layout-item>
            <template for:each={fields.data} for:item="field">
                <lightning-layout-item key={field.name}>
                    <p>{field.name}</p>
                </lightning-layout-item>
            </template>
        </lightning-layout>
    </template> -->
    <div style="width:100%;" class="slds-card_boundary related_list_card_border_top">
        <div class="related_list_themed_border_top"></div>
        <lightning-card icon-name={icon} >
            <span slot="title" class="slds-card__header-title slds-card__header-link">
                {label} ({totalNumberOfRows})
            </span>
            <template if:true={records}>
                <div class="slds-card__body slds-card__body--inner">
                    <lightning-datatable
                        key-field="id"
                        data={records}
                        columns={columns}
                        enable-infinite-loading
                        onloadmore={loadMoreData}
                        is-loading={tableLoadingState}
                        onsort={updateColumnSorting}
                        sorted-by={sortedBy}
                        sorted-direction={sortDirection}
                        hide-checkbox-column
                        onrowaction={handleRowAction}
                        >
                    </lightning-datatable>
                </div>
            </template>
            <template if:false={records}>
                <div class="slds-card__body slds-card__body--inner">
                    <div class="errorMessage">{labels.no_records}</div>
                </div>
            </template>
        </lightning-card>
    </div>
</template>